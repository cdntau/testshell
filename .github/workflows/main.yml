name: Direct HTTP Test

on:
  workflow_dispatch:

jobs:
  direct-http:
    runs-on: ubuntu-latest

    steps:
      - name: Create index page
        run: |
          echo "<h1>HELLO FROM GITHUB ACTIONS</h1>" > index.html

      - name: Start HTTP server
        run: |
          nohup python3 -m http.server 8080 >/dev/null 2>&1 &
          echo "Server started on port 8080"

      - name: Print public IP
        run: |
          echo "Public IP of runner:"
          curl -s ifconfig.me || true
          hostname -I || true
          echo "TRY accessing: http://<above-ip>:8080"
          echo "It will NOT open. Inbound ports are blocked by GitHub."
          sleep 999999
